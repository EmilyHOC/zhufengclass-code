{"version":3,"file":"vue.js","sources":["../../src/util/index.js","../../src/observer/index.js","../../src/state.js","../../src/init.js","../../src/index.js"],"sourcesContent":["export function isObject2(data) {\r\n   return typeof data=='object'&&data!==null\r\n}\r\n\r\n","//把data中的数据都使用Object.definedProperty重新定义，不能兼容IE8\r\nimport {isObject2} from '../util/index'\r\n\r\nclass  Observer{\r\n    constructor(value) {\r\n        console.log(value)\r\n        //vue如果数据的层次过多，需要递归地解析对象中的属性，依次增加set和get方法，proxy\r\n        this.walk(value)\r\n    }\r\n    //观测数据\r\n    walk(data){\r\n        //拿到所有的key值\r\n        let keys = Object.keys(data)\r\n        console.log(keys)\r\n        keys.forEach((key,index)=> {\r\n            defineReactive(data,key,data[key])\r\n        })\r\n        for(let i = 0;i<keys.length;i++){\r\n            let key = keys[i]\r\n            let value = data[key]\r\n\r\n            //响应式的核心\r\n            defineReactive(data,key,value) //定义响应式的核心\r\n        }\r\n    }\r\n}\r\nfunction defineReactive(data,key,value) {\r\n    console.log(data)\r\n    observe(value) //递归实现深度检测\r\n    Object.defineProperty(data,key,{\r\n        get() {\r\n            return value;\r\n        },\r\n        set(newValue) {\r\n            if(newValue=== value) return;\r\n            observe(newValue)  //继续劫持用户设置的值，有可能用户设置的值是对象\r\n            console.log('值变化')\r\n            value = newValue\r\n        }\r\n    })\r\n}\r\nexport function observe(data) {\r\n    //看看他是不是对象，不是的话return 是的话就观测对象\r\n    let isObject =  isObject2(data)\r\n    if(!isObject){\r\n        return\r\n    }\r\n    new Observer(data)\r\n\r\n}","import {observe} from './observer/index'\r\nexport function initState(vm) {\r\n    const opts = vm.$options\r\n    console.log(opts)\r\n    //vue的数据来源 属性 方法 数据 计算属性 watch\r\n    if(opts.props){\r\n        initProps(vm)\r\n    }\r\n    if(opts.methods){\r\n        initMethod(vm)\r\n    }\r\n    if(opts.data){\r\n        initData(vm)\r\n    }\r\n    if(opts.computed){\r\n        initComputed(vm)\r\n    }\r\n    if(opts.watch){\r\n        initWatch(vm)\r\n    }\r\n}\r\nfunction initData(vm) {\r\n    console.log('初始化数据',vm.$options.data)\r\n    let data = vm.$options.data\r\n    data =vm._data= typeof data === 'function'?data.call(vm): data;\r\n    console.log(data)\r\n    //对象劫持 用户改变了数据 我希望得到通知，刷新页面\r\n    //MVVM模式 数据变化可以驱动视图\r\n    //Object.defineProperty()给属性添加get方法和set方法\r\n    observe(data) //响应式原理\r\n}\r\n function initProps(){\r\n\r\n }\r\nfunction initMethod(){\r\n\r\n}\r\nfunction initComputed(){\r\n\r\n}\r\nfunction initWatch(){\r\n\r\n}\r\n","import {initState} from './state'\r\n//在原型上添加一个init方法\r\nexport function initMixin(Vue) {\r\n    Vue.prototype._init = function (options) {\r\n        console.log(options)\r\n        //数据的劫持\r\n        const vm = this;//vue中使用this.$options指代的是用户传递的属性\r\n        vm.$options = options\r\n        console.log(vm)\r\n        //初始化状态\r\n        initState(vm) //分割代码\r\n\r\n    }\r\n}","import {initMixin} from \"./init\";\r\n\r\n//Vue的核心代码\r\nfunction Vue(options) {\r\n    //进行Vue文件的初始化操作\r\n    this._init(options)\r\n}\r\ninitMixin(Vue)  //通过引入文件的方式\r\n//通过引入文件的方式，给Vue原型上添加方法\r\nexport default Vue"],"names":["isObject2","data","Observer","value","console","log","walk","keys","Object","forEach","key","index","defineReactive","i","length","observe","defineProperty","get","set","newValue","isObject","initState","vm","opts","$options","props","methods","initData","computed","watch","_data","call","initMixin","Vue","prototype","_init","options"],"mappings":"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"}